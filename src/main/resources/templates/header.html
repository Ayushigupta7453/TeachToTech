<header id="header" class="header d-flex align-items-center sticky-top">
  <style>
    #auth-buttons, #user-greeting {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    #greeting-message {
        color: #fff;  /* This will make the greeting text white to match header */
        margin-right: 10px;
    }

    /* If you need to adjust the greeting text size */
    #greeting-message {
        font-size: 1rem;  /* Adjust size as needed */
        font-weight: 500;  /* Makes the text slightly bold */
    }

    /* To ensure proper spacing with your existing btn-getstarted class */
    #user-greeting .btn-getstarted {
        margin-left: 10px;
    }
</style> 
  <div class="container-fluid container-xl position-relative d-flex align-items-center">
        <a href="/index" class="logo d-flex align-items-center me-auto">
            <img src="assets/img/TT.png" alt="Company Logo">
            <h1 class="sitename">TeachToTech</h1>
        </a>

       
      <nav id="navmenu" class="navmenu">
          <ul>
              <li><a href="/index" class="active">Home<br></a></li>
           <li class="dropdown">
                  <a href="/courses"><span>All Courses</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                  <ul>
                    <li><a href="/courses?category=Full Stack Web Development">Full Stack Web Development</a></li>
                    <li><a href="/courses?category=Data Science">Data Science</a></li>
                    <li><a href="/courses?category=Data Structures and Algorithms">Data Structures and Algorithms</a></li>
                    <li><a href="/courses?category=Interview Preparation">Interview Preparation</a></li>
                    <li class="dropdown">
                        <a href="#"><span>More Categories</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                        <ul>
                            <li><a href="/courses?category=Cloud Computing">Cloud Computing</a></li>
                            <li><a href="/courses?category=Competitive Programming">Competitive Programming</a></li>
                            <li><a href="/courses?category=DevOps">DevOps</a></li>
                            <li><a href="/courses?category=Technology">Technology</a></li>
                            <li><a href="/courses?category=Web Development">Web Development</a></li>
                            <li><a href="/courses?category=Digital Marketing">Digital Marketing</a></li>
                            <li><a href="/courses?category=Internship">Internship</a></li>
                        </ul>
                    </li>
                </ul>
              </li>
              <li><a href="/trainers">Team</a></li>
              <li><a href="/events">Events</a></li>
              <li><a href="/pricing">Pricing</a></li>
              
                 <li><a href="/about">About</a></li>
              <li><a href="/contact">Contact</a></li>
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
      
      <div id="auth-buttons" style="display: block;">
        <a class="btn-getstarted" href="/api/users/login">Login</a>
        <a class="btn-getstarted" href="/api/users/register">Register</a>
      </div>
      
      <div id="user-greeting" style="display: none;">
        <span id="greeting-message">Hello, [username]</span>
        <a href="#" onclick="handleLogout(event)" class="btn-getstarted">Logout</a>
      </div>
      
      
    </div>
</header>
<script>
  // Function to fetch the username using the token
 // Function to fetch the username using the token
async function fetchUserName(token) {
  try {
    const response = await fetch("/api/users/name", {
      method: "GET",
      headers: {
        'Authorization': `Bearer ${token}`,
      },
    });

    if (!response.ok) {
      // If response is not OK, clear token and return null
      localStorage.removeItem("authToken");
      return null;
    }

    const username = await response.text();
    return username;
  } catch (error) {
    console.error("Error fetching username:", error);
    localStorage.removeItem("authToken");
    return null;
  }
}

// Function to handle logout
function handleLogout(event) {
  event.preventDefault();
  localStorage.removeItem("authToken");
  updateHeader();
  window.location.href = "/";
}

// Function to update the header based on authentication state
async function updateHeader() {
  const token = localStorage.getItem("authToken");
  const authButtons = document.getElementById("auth-buttons");
  const userGreeting = document.getElementById("user-greeting");
  const greetingMessage = document.getElementById("greeting-message");

  if (!token) {
    authButtons.style.display = "block";
    userGreeting.style.display = "none";
    return;
  }

  const username = await fetchUserName(token);
  if (username) {
    authButtons.style.display = "none";
    userGreeting.style.display = "block";
    greetingMessage.textContent = `Hello, ${username}`;
  } else {
    authButtons.style.display = "block";
    userGreeting.style.display = "none";
  }
}
</script>

